<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

 <head>
  <title>sipXconfig SOAP Access</title>
  <link rel="stylesheet" type="text/css" href="manual.css"/>

</head>
<body id="soap">

<h1>SOAP Access</h1>

<p>You can perform user and device maintenance through a SOAP API. No
matter what language bindings you use (perl, c++, etc), you can use
the Javadocs for the classes as a guide to what functions are available.</p>

<p><a href="../../profilegenerator/soap/dist/api/index.html">SOAP API</a></p>

<h2>Perl Import Script</h2>

<p>A simple perl script is installed called
<code>sipx_import.pl</code> that is both an example script for
creating your own perl script and as a functional utility for
importing data in comma separated values files. It is configed by file
<code>sipx_import.dat</code> file. Files are located in
<code>/usr/share/sipxpbx/bin</code> for RPM installs and
<code>/usr/local/sipx/share/sipxpbx/bin</code> for source based
installs.</p>

<h3>Installation</h3>

<p>To use the import script. You'll need to install SOAP support for Perl</p>

<dl>
  <dt>Perl libwww</dt>

  <dd>Most perl distributions will have libwww support installed. If
  not see <a href="http://http://search.cpan.org">http://http://search.cpan.org</a></dd>
      
  <dt>SOAP Lite Perl (tested with 0.55)</dt>
  <dd>      
if you have CPAN.pm installed and are connected to the Internet
<pre>      
   perl -MCPAN -e 'install SOAP::Lite'
</pre>
      
  Otherwise you can download tarball<br/>
  <a
href="http://search.cpan.org/CPAN/authors/id/K/KU/KULCHENKO/SOAP-Lite-0.55.tar.gz">http://search.cpan.org/CPAN/authors/id/K/KU/KULCHENKO/SOAP-Lite-0.55.tar.gz</a><br/>
   and follow instructions in README.  When installing, warnings about MIME::Lite and MIME::Parser do
        not have any impact when running the example scripts
  </dd>
</dl>

<h3>Example</h3>

<p>Create a data file with comma separated values like the following.
You can put the following example data into one file or several files.
This sample data will create data in the "default" user and device
groups. You change it to any groups you wish.</p>

<p>Create users in default user group</p>
<pre>
USER_CREATE,jlennon,1234,John,Lennon,111,,default
USER_CREATE,pmccartney,1234,Paul,McCartney,112,,default
USER_CREATE,gharrison,1234,Geore,Harrison,113,,default
USER_CREATE,ssutcliffe,1234,Stu,Sutcliffe,114,,default
USER_CREATE,rstar,1234,Ringo,Star,115,,default
</pre>

<p>Users need phones, here we create vendor specific devices,
Pingtel's softphone and Pingtel's hard phone (hardphone not in
production anymore).</p>
      
<pre>
DEVICE_CREATE,ff00000009a1,ixpressa_x86_win32,ixpressa1,default,John's Redhat
DEVICE_CREATE,ff00000009a2,ixpressa_x86_win32,ixpressa2,default,Paul's Gentoo
DEVICE_CREATE,ff00000009a3,ixpressa_x86_win32,ixpressa3,default,George's Win2K
DEVICE_CREATE,ff00000009a4,ixpressa_x86_win32,ixpressa4,default,Stu's WinXP
DEVICE_CREATE,00d01e006d8d,xpressa_strongarm_vxworks,xpressa1,default,Ringo's home phone
</pre>

<p>Phone's need to be told what user will be using them</p>
      
<pre>
DEVICE_ASSIGN,jlennon,ff00000009a1
DEVICE_ASSIGN,pmccartney,ff00000009a2
DEVICE_ASSIGN,gharrison,ff00000009a3
DEVICE_ASSIGN,ssutcliffe,ff00000009a4
DEVICE_ASSIGN,rstar,00d01e006d8d
</pre>
      
<p>User automatically get one line: <em>username@domainname</em>, but
here we can give users addition lines</p>
      
<pre>
USER_CREATELINE,jlennon,PROVISION,DISABLE,sip:fanclub@pingtel.com
USER_CREATELINE,pmccartney,PROVISION,DISABLE,sip:bookings@pingtel.com
</pre>

<p>To import the data, edit the <code>sipx_import.data</code>
with the appropriate data, you'll definitely have to change the
<code>ADMIN_PASSWORD</code> value.  Then run the following command:</p>

<pre>
  perl sipx_import.pl <em>datafile.csv</em>
</pre>

<span id="lastmodified">
<!-- hhmts start -->
Last modified: Sun Oct 10 13:15:15 EDT 2004
<!-- hhmts end -->
</span>

</body>
</html>
