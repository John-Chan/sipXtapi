." Text automatically generated by txt2man
.TH untitled  "November 22, 2006" "" ""
.SH NAME
\fBsipdb-dump \fP- sipX In Memory Database (IMDB) data dumper
\fB
.SH SYNOPSIS
.nf
.fam C
\fBsipdb-dump\fP [\fIoptions\fP] [\fIimdb-xml-files\fP \.\.\.]
.fam T
.fi
.SH DESCRIPTION
Many of the sipX services store information periodically to the disk in the form of XML files. 
These files can provide insight to the current state of the system. This tool displays the files
in a format condusive to command line tools like awk, grep and sed for handy "real-time" reports.
.PP
In addition to the fields copied from the XML file, you may notice various calculated fields.
For example there is a field called expired with values true or false false depending on the
system clock time and the expiration time of the SIP registration or subscription time.
.SH OPTIONS
\fBsipdb-dump\fP [\fIoptions\fP]
.TP
.B
(none)
Dump files
.TP
.B
\fB-h\fP|\fB--help\fP
This help text
.TP
.B
\fB-v\fP|\fB--verbose\fP
Dump debugging output to screen. Each shell command
will be printed to stdout.
.SH ENVIRONMENT
.SS  NONE

.SH EXAMPLE

All example are assumed to be run in this directory
$ cd /var/sipxdata/sipdb
.PP
Also, in these examples, the awk field indexes may vary so adjust with the 
version of this tool or version of the sipX services so please adjust
accordingly in your commands.
.PP
Find IP address of all phones with expired registrations
.PP
.nf
.fam C
    $ sipdb-dump registration.xml | awk -F\\t '/expired=true/ {print $6}'

.fam T
.fi
Find IP address of all phones with expired subscriptions
.PP
.nf
.fam C
    $ sipdb-dump ~/temp/sipdb/subscription.xml | \
      awk -F\\t '/expired=true/ { print $10 }'

.fam T
.fi
Expired status of all phones grouped by status
.PP
.nf
.fam C
    $ sipdb-dump registration.xml | awk -F\\t '{print $9 " " $6}' | sort

.fam T
.fi
Find all permissions for user with id 160
.PP
.nf
.fam C
    $ sipdb-dump registration.xml | awk -F\\t '/identity=160@/ {print}'

.fam T
.fi
Find all aliases for user with id 160
.PP
.nf
.fam C
    $ sipdb-dump alias.xml | awk -F\\t '/contact=.*sip:160@/ {print}'

.fam T
.fi
Find all unique aliases to other domains
.PP
.nf
.fam C
    $ sipdb-dump alias.xml | awk -F\\t '{print $3}' | sort --unique

.fam T
.fi
.SH HINTS

Feed output to other tools to send SIP messages, hourly status checks or
.TP
.B
imports data to other systems.
awk has a printf function for a wide 
variety of formating needs.
.PP
passing "\fB-F\fP\\t" to awk is force tool to only split records on the tab character. 
Sometimes it's not needed but it's always recommended.
.SH BUGS

see http://tracker.sipfoundry.org
.SH AUTHOR

Douglas Hubler <dhubler@pingtel.com>
