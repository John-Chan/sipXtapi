

<html>
    <head>
        <script src="../script/validate.js"></script>
        <script language="JavaScript">
            var validator = new Validate();
            function getValues()
            {
                var form = document.frmEditDigitmap;
                var query = location.search.substring(1);
                var values = new Array();
                var pairs = query.split( "&" );
                for ( i = 0; i < pairs.length; i++ )
                {
                    var pos = pairs[i].indexOf( "=" );
                    values[i] = pairs[i].substring(pos + 1);
                }
                var id = values[0];
                var rpid = values[1];
                form.oldid.value = id;
                form.rpid.value = rpid;


                var div = this.opener.mainFrame.mainFrame.document.getElementById(id);
                var children = div.childNodes;
                for ( i = 0; i < children.length; i++ )
                {
                    if ( children[i].id == "digitmap_number" )
                    {
                        form.number.value = children[i].value;
                    }
                    else if ( children[i].id == "digitmap_target" )
                    {
                        form.target.value = children[i].value;
                    }
                }
            }
            function formSubmit( form )
            {
                var formIsValid = true;
                if ( form.number.value == "" )
                {
                        alert("Please fill in the Dial Plan field");
                }
                else if ( form.target.value == "" )
                {
                        alert("Please fill in the SIP Address field");
                }
                else
                {
                    var number = validator.trim(form.number.value);
                    var target = validator.trim(form.target.value);
                    var id = form.oldid.value;
                    var rpid = form.rpid.value;
                    this.opener.top.mainFrame.add_digitmap(number, target, rpid, "true", id );
                    this.window.close();
                }
            }
            function closeWindow()
            {
                this.window.close();
            }
        </script>
        <title>Edit Digit Map</title>
        <link rel="stylesheet" href="../../style/dms.css" type="text/css">
    </head>
    <body class="bglight" onload="getValues()">
        <p>&nbsp;</p>
		<p class="formtitle" align="center">Edit a Digit Map</p>
        <form name="frmEditDigitmap">
            <table width="150" border="0" cellspacing="3" cellpadding="0" align="center">
                <tr>
                    <td class="formtext" nowrap>Dial plan</td>
                    <td>
                        <input type="text" name="number" size="30">
                    </td>
                </tr>
				<tr>
                    <td class="formtext" nowrap>SIP Address</td>
                    <td>
                        <input type="text" name="target" size="30">
                    </td>
                </tr>
            </table>
            <br>
            <div align="center">
                <input type="button" name="cmdSubmitForm" value="Submit" onclick="formSubmit(this.form)">&nbsp;&nbsp;
                <input type="button" name="cmdCloseWindow" value="Cancel" onclick="closeWindow()" />
            </div>
            <input type="hidden" name="oldid">
            <input type="hidden" name="rpid"/>
        </form>
    </body>
</html>
