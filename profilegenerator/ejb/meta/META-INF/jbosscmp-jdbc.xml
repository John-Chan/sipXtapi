<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jbosscmp-jdbc PUBLIC "-//JBoss//DTD JBOSSCMP-JDBC 4.0//EN" "http://www.jboss.org/j2ee/dtd/jbosscmp-jdbc_4_0.dtd">
<jbosscmp-jdbc>
    <defaults>
        <datasource>java:/PDSDataSource</datasource>
        <datasource-mapping>Oracle8</datasource-mapping>
    </defaults>
        
    <!-- This section provides optional object-to-relational mapping descriptions -->

    <enterprise-beans>
        <entity>
            <ejb-name>RefProperty</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>REF_PROPERTIES</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>profileType</field-name>
                <column-name>PROFILE_TYPE</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>code</field-name>
                <column-name>CODE</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>content</field-name>
                <column-name>CONTENT</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByRefConfigurationSetID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, CS_PROPERTY_PERMISSIONS csrp</from>
                    <where>ID=csrp.REF_PROP_ID AND csrp.RCS_ID={0}</where>
                    <order></order>
                </declared-sql>
            </query>
        </entity>

        <entity>
            <ejb-name>Application</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>            
            <read-only>false</read-only>
            <table-name>APPLICATIONS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>refPropertyID</field-name>
                <column-name>REF_PROP_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>url</field-name>
                <column-name>URL</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>deviceTypeID</field-name>
                <column-name>PT_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>description</field-name>
                <column-name>DESCRIPTION</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByApplicationGroupID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, APP_AG_ASSOC assoc</from>
                    <where>assoc.AG_ID = {0} AND id = assoc.APPS_ID</where>
	                <order></order>
                </declared-sql>
            </query>            
        </entity>


        <entity>
            <ejb-name>CoreSoftware</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>CORE_SOFTWARE_DETAILS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>installedDate</field-name>
                <column-name>INSTALLED_DATE</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>description</field-name>
                <column-name>DESCRIPTION</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>version</field-name>
                <column-name>VERSION</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByDeviceType</method-name>                    
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, PHONE_TYPE_CSD_ASSOC assoc</from>
                    <where>id = assoc.CSD_ID AND assoc.PT_ID = {0}</where>
                    <order/>
                </declared-sql>
            </query>
        </entity>

        <entity>
            <ejb-name>CSProfileDetail</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>CS_PROFILE_DETAILS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>profileType</field-name>
                <column-name>PROFILE_TYPE</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>fileName</field-name>
                <column-name>FILE_NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>renderClassName</field-name>
                <column-name>RENDER_CLASS</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>projectionClassName</field-name>
                <column-name>PROJECTION_CLASS</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>coreSoftwareDetailsID</field-name>
                <column-name>CSD_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>xsltURL</field-name>
                <column-name>XSLT_URL</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByCoreSoftwareAndProfileType</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>                        
                    </method-params>
                </query-method>
                <declared-sql>
                    <where>CSD_ID={0} AND PROFILE_TYPE ={1}</where>
                    <order></order>
                </declared-sql>
            </query>                        
        </entity>

        <entity>
            <ejb-name>User</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <read-time-out>300</read-time-out>
            <table-name>USERS</table-name>
            <cmp-field>
                <field-name>refConfigSetID</field-name>
                <column-name>RCS_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>firstName</field-name>
                <column-name>FIRST_NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>lastName</field-name>
                <column-name>LAST_NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>userGroupID</field-name>
                <column-name>UG_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>password</field-name>
                <column-name>PASSWORD</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>displayID</field-name>
                <column-name>DISPLAY_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>extension</field-name>
                <column-name>EXTENSION</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>profileEncryptionKey</field-name>
                <column-name>PROFILE_ENCRYPTION_KEY</column-name>
            </cmp-field>
            <query>
                <description>Custom Finder Method to find users with ADMIN or SUPER roles (Users table is implied in the FROM section of the query)</description>
                <query-method>
					<method-name>findAdministratorsByOrganizationID</method-name>                    
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, USER_ROLES role</from>
                    <where>role.USRS_ID = ID AND ORG_ID={0} AND ( (role.ROLES_NAME = 'ADMIN') OR (role.ROLES_NAME = 'SUPER') )</where>
                    <order></order>
                </declared-sql>
            </query>
            <query>
                <query-method>
					<method-name>findByAlias</method-name>                    
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, ALIASES alias</from>
                    <where>alias.USER_ID = ID AND alias.ALIAS={0}</where>
                    <order></order>
                </declared-sql>
            </query>
            <query>
                <query-method>
					<method-name>findByDisplayIDOrExtension</method-name>                    
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <where>DISPLAY_ID = {0} OR EXTENSION = {0}</where>
                    <order></order>
                </declared-sql>
            </query>
        </entity>

        <entity>
            <ejb-name>Device</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>LOGICAL_PHONES</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>shortName</field-name>
                <column-name>SHORT_NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>coreSoftwareDetailsID</field-name>
                <column-name>CSD_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>deviceGroupID</field-name>
                <column-name>PG_ID</column-name>
            </cmp-field>
    	    <cmp-field>
                <field-name>refConfigSetID</field-name>
                <column-name>RCS_ID</column-name>
            </cmp-field>
    	    <cmp-field>
                <field-name>description</field-name>
                <column-name>DESCRIPTION</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>userID</field-name>
                <column-name>USRS_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>deviceTypeID</field-name>
                <column-name>PT_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>serialNumber</field-name>
                <column-name>SERIAL_NUMBER</column-name>
            </cmp-field>
        </entity>

        <entity>
            <ejb-name>Organization</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>ORGANIZATIONS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>parentID</field-name>
                <column-name>PARENT_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>dnsDomain</field-name>
                <column-name>DNS_DOMAIN</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>stereotype</field-name>
                <column-name>STEREOTYPE</column-name>
            </cmp-field>
        </entity>

        <entity>
            <ejb-name>DeviceType</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>PHONE_TYPES</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>manufacturerID</field-name>
                <column-name>MANU_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>model</field-name>
                <column-name>MODEL</column-name>
            </cmp-field>
        </entity>

        <entity>
            <ejb-name>ConfigurationSet</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>CONFIG_SETS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>refConfigSetID</field-name>
                <column-name>RCS_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>profileType</field-name>
                <column-name>PROFILE_TYPE</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>content</field-name>
                <column-name>CONTENT</column-name>
            </cmp-field>
            <query>
                <description>Custom Finder Method to find ConfigSets for user</description>
                <query-method>
                    <method-name>findByUserIDAndProfileType</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>int</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, USER_CS_ASSOC assoc</from>
                    <where>ID=assoc.CS_ID AND assoc.USRS_ID={0} AND PROFILE_TYPE = {1}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>Custom Finder Method to find ConfigSets for LogicalPhone</description>
                <query-method>
                    <method-name>findByLogicalPhoneID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, LOG_PHONE_CS_ASSOC assoc</from>
                    <where>ID=assoc.CS_ID AND assoc.LOG_PN_ID={0}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>Custom Finder Method to find ConfigSets for DeviceGroup</description>
                <query-method>
                    <method-name>findByDeviceGroupID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <select>
                        <distinct/>                        
                    </select>
                    <from>, PNG_CS_ASSOC assoc </from>
                    <where>ID=assoc.CS_ID AND assoc.PG_ID={0}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>Custom Finder Method to find ConfigSets for UserGroup</description>
                <query-method>
                    <method-name>findByUserGroupIDAndProfileType</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>int</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, UG_CS_ASSOC assoc</from>
                    <where>ID=assoc.CS_ID AND assoc.UG_ID={0} AND PROFILE_TYPE = {1}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>Custom Finder Method to find ConfigSets for user</description>
                <query-method>
                    <method-name>findByUserID</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, USER_CS_ASSOC assoc</from>
                    <where>ID=assoc.CS_ID AND assoc.USRS_ID={0}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>Custom Finder Method to find ConfigSets for UserGroup</description>
                <query-method>
                    <method-name>findByUserGroupID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, UG_CS_ASSOC assoc</from>
                    <where>ID=assoc.CS_ID AND assoc.UG_ID={0}</where>
                    <order/>
                </declared-sql>
            </query>
        </entity>

        <entity>
            <ejb-name>RefConfigurationSet</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>REF_CONFIG_SETS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByNameAndOrganization</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <where>NAME={0} AND ORG_ID={1}</where>
                    <order/>
                </declared-sql>
            </query>
        </entity>

        <entity>
            <ejb-name>DeviceGroup</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>PHONE_GROUPS</table-name>
            <cmp-field>
                <field-name>id</field-name>
                <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
                <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>refConfigSetID</field-name>
                <column-name>RCS_ID</column-name>
            </cmp-field>
            <cmp-field>
                <field-name>parentID</field-name>
                <column-name>PARENT_PG_ID</column-name>
            </cmp-field>
            <query>
                <description>finds all of the 'top' level groups in the config server's database</description>
                <query-method>
                    <method-name>findTopGroups</method-name>
                    <method-params/>                    
                </query-method>
                <declared-sql>
                    <where>PARENT_UG_ID IS NULL</where>
	                <order></order>
                </declared-sql>                
            </query>            
        </entity>

	    <entity>
    		<ejb-name>Manufacturer</ejb-name>
    		<create-table>false</create-table>
    		<remove-table>false</remove-table>
    		<read-only>false</read-only>
    		<table-name>MANUFACTURERS</table-name>
            <cmp-field>
    			<field-name>id</field-name>
    			<column-name>ID</column-name>
    		</cmp-field>
    		<cmp-field>
    			<field-name>name</field-name>
    			<column-name>NAME</column-name>
    		</cmp-field>
    	</entity>

    	<entity>
    		<ejb-name>UserGroup</ejb-name>
    		<create-table>false</create-table>
    		<remove-table>false</remove-table>
    		<read-only>false</read-only>
    		<table-name>USER_GROUPS</table-name>            
            <cmp-field>
    			<field-name>id</field-name>
    			<column-name>ID</column-name>
    		</cmp-field>
    		<cmp-field>
    			<field-name>name</field-name>
    			<column-name>NAME</column-name>
    		</cmp-field>
    		<cmp-field>
    			<field-name>parentID</field-name>
    			<column-name>PARENT_UG_ID</column-name>
    		</cmp-field>
            <cmp-field>
                <field-name>organizationID</field-name>
                <column-name>ORG_ID</column-name>
            </cmp-field>
    	    <cmp-field>
                <field-name>refConfigSetID</field-name>
                <column-name>RCS_ID</column-name>
            </cmp-field>
            <query>
                <query-method>
                    <method-name>findByOrganizationIDAndName</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <where>ORG_ID={0} AND NAME={1}</where>
                    <order/>
                </declared-sql>
            </query>
            <query>
                <description>finds all of the 'top' level groups in the config server's database</description>
                <query-method>
                    <method-name>findTopGroups</method-name>
                    <method-params/>                    
                </query-method>
                <declared-sql>
                    <where>PARENT_UG_ID IS NULL</where>
	                <order></order>
                </declared-sql>                
            </query>
    	</entity>

        <entity>
            <ejb-name>ApplicationGroup</ejb-name>
            <create-table>false</create-table>
            <remove-table>false</remove-table>
            <read-only>false</read-only>
            <table-name>APPLICATION_GROUPS</table-name>
            <cmp-field>
                    <field-name>id</field-name>
                    <column-name>ID</column-name>
            </cmp-field>
            <cmp-field>
                    <field-name>name</field-name>
                    <column-name>NAME</column-name>
            </cmp-field>
            <cmp-field>
                    <field-name>organizationID</field-name>
                    <column-name>ORG_ID</column-name>
            </cmp-field>            
            <query>
                <query-method>
                    <method-name>findByUserID</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, USER_AG_ASSOC assoc</from>
                    <where>assoc.USRS_ID = {0} AND assoc.AG_ID = ID</where>
	                <order></order>                    
                </declared-sql>
            </query>                        
            <query>
                <query-method>
                    <method-name>findByUserGroupID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, USER_GROUP_AG_ASSOC assoc</from>
                    <where>assoc.UG_ID = {0} AND assoc.AG_ID = ID</where>
	                <order></order>                    
                </declared-sql>
            </query>                        
            <query>
                <query-method>
                    <method-name>findByApplicationID</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <declared-sql>
                    <from>, APP_AG_ASSOC assoc</from>
                    <where>assoc.APPS_ID = {0} AND assoc.AG_ID = ID</where>
	                <order></order>                    
                </declared-sql>
            </query>            
    	</entity>

    </enterprise-beans>
    
</jbosscmp-jdbc>
