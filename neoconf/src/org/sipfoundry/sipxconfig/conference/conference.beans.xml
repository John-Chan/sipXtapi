<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
  
  <bean id="bridgeSettingModel" class="org.sipfoundry.sipxconfig.setting.SettingModel">
    <property name="resource" value="sipxconference/bridge.xml"/>
    <property name="modelFilesContext" ref="modelFilesContext"/>
  </bean>

  <bean id="conferenceSettingModel" class="org.sipfoundry.sipxconfig.setting.SettingModel">
  	<property name="resource" value="sipxconference/conference.xml"/>
    <property name="modelFilesContext" ref="modelFilesContext"/>
  </bean>

  <bean id="participantSettingModel" class="org.sipfoundry.sipxconfig.setting.SettingModel">
  	<property name="resource" value="sipxconference/participant.xml"/>
    <property name="modelFilesContext" ref="modelFilesContext"/>
  </bean>
      
    
  <bean name="conferenceBridge" class="org.sipfoundry.sipxconfig.conference.Bridge"
    singleton="false">
    <property name="settingModel">
      <ref local="bridgeSettingModel"/>
    </property>
  </bean>

  <bean name="conferenceConference" class="org.sipfoundry.sipxconfig.conference.Conference"
    singleton="false">
    <property name="settingModel">
      <ref local="conferenceSettingModel"/>      
    </property>
  </bean>
  
  <bean name="conferenceParticipant" class="org.sipfoundry.sipxconfig.conference.Participant"
    singleton="false">
    <property name="settingModel">
      <ref local="participantSettingModel"/>      
    </property>
  </bean>
  
  <bean id="conferenceBridgeContextImpl"
    class="org.sipfoundry.sipxconfig.conference.ConferenceBridgeManagerImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
    <property name="coreContext" ref="coreContextImpl"/>
  </bean>
  
  <bean id="conferenceBridgeContextUserDelete"
    factory-bean="conferenceBridgeContextImpl" factory-method="createUserDeleteListener"/>
  
  <bean id="conferenceBridgeContext" class="org.springframework.aop.framework.ProxyFactoryBean"
    parent="abstractDao"
    depends-on="conferenceBridgeContextUserDelete">
    <property name="proxyInterfaces"
      value="org.sipfoundry.sipxconfig.conference.ConferenceBridgeManager"/>
    <property name="target">
      <ref local="conferenceBridgeContextImpl"/>
    </property>
  </bean>
  
</beans>
