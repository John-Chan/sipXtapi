<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN" 
	"http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">
<hibernate-mapping package="org.sipfoundry.sipxconfig.setting">
  <!--
    - V A L U E  S T O R A G E
    -->
  <class name="ValueStorage" table="storage">
    <id name="id" column="storage_id" type="int" unsaved-value="-1">
      <generator class="sequence">
        <param name="sequence">storage_seq</param>
      </generator>
    </id>
    <!-- S E T T I N G   V A L U E -->
    <map name="values" cascade="all" table="setting">
      <key column="storage_id"/>
      <index column="path" type="string"/>
      <element type="string" column="value" not-null="true"/>
    </map>    
    <!--
      - T A G
      -->
	  <joined-subclass name="Tag" table="tag">
      <key column="storage_id"/>
      <property name="label"/>
      <property name="resource"/>
    </joined-subclass>  	
  </class>  

  <query name="rootTag">
    <![CDATA[from Tag f where f.label = 'Default' and f.resource = :resource]]>
  </query>  
    
  <query name="tags">
    <![CDATA[from Tag f where f.resource = :resource]]>
  </query>  
    
</hibernate-mapping>
