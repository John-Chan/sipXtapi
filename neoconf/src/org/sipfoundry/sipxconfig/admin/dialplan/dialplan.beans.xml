<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

  <!--
  - D I A L   P L A N S
  -->
  <bean id="dialRuleFactory" class="org.sipfoundry.sipxconfig.admin.dialplan.DialingRuleFactory"/>
  
  <bean id="defaultInternalRule" class="org.sipfoundry.sipxconfig.admin.dialplan.InternalRule"
    singleton="false">
    <property name="name">
      <value>Internal</value>
    </property>
    <property name="description">
      <value>Default internal dialing plan</value>
    </property>
    <property name="enabled">
      <value>true</value>
    </property>
    <property name="voiceMail">
      <value>101</value>
    </property>
    <property name="voiceMailPrefix">
      <value>8</value>
    </property>
    <property name="aaAliases">
      <value>operator, 0</value>
    </property>
  </bean>
  
  <bean id="defaultEmergencyRule" class="org.sipfoundry.sipxconfig.admin.dialplan.EmergencyRule"
    singleton="false">
    <property name="name">
      <value>Emergency</value>
    </property>
    <property name="description">
      <value>Emergency dialing plan</value>
    </property>
    <property name="enabled">
      <value>false</value>
    </property>
    <property name="optionalPrefix">
      <value>9</value>
    </property>
    <property name="emergencyNumber">
      <value>911</value>
    </property>
  </bean>
  
  <bean id="defaultLongDistanceRule"
    class="org.sipfoundry.sipxconfig.admin.dialplan.LongDistanceRule" singleton="false">
    <property name="name">
      <value>Long Distance</value>
    </property>
    <property name="description">
      <value>Long distance dialing plan</value>
    </property>
    <property name="enabled">
      <value>false</value>
    </property>
    <property name="pstnPrefix">
      <value>9</value>
    </property>
    <property name="longDistancePrefix">
      <value>1</value>
    </property>
    <property name="externalLen">
      <value>10</value>
    </property>
  </bean>
  
  <bean id="defaultTollFreeRule" parent="defaultLongDistanceRule" singleton="false">
    <property name="name">
      <value>Toll free</value>
    </property>
    <property name="description">
      <value>Toll free dialing</value>
    </property>
    <property name="areaCodes">
      <value>800, 866, 877, 888</value>
    </property>
    <property name="permission">
      <bean id="org.sipfoundry.sipxconfig.common.Permission.TOLL_FREE_DIALING"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
    </property>
  </bean>
  
  <bean id="defaultRestrictedRule" parent="defaultLongDistanceRule" singleton="false">
    <property name="name">
      <value>Restricted</value>
    </property>
    <property name="description">
      <value>Restricted dialing</value>
    </property>
    <property name="areaCodes">
      <value>900</value>
    </property>
    <property name="permission">
      <bean id="org.sipfoundry.sipxconfig.common.Permission.RESTRICTED_DIALING"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
    </property>
  </bean>
  
  <bean id="defaultInternationalRule"
    class="org.sipfoundry.sipxconfig.admin.dialplan.InternationalRule" singleton="false">
    <property name="name">
      <value>International</value>
    </property>
    <property name="description">
      <value>International dialing</value>
    </property>
    <property name="internationalPrefix">
      <value>011</value>
    </property>
  </bean>
  
  <bean id="defaultLocalRule" class="org.sipfoundry.sipxconfig.admin.dialplan.LocalRule"
    singleton="false">
    <property name="name">
      <value>Local</value>
    </property>
    <property name="description">
      <value>Local dialing</value>
    </property>
    <property name="enabled">
      <value>false</value>
    </property>
    <property name="pstnPrefix">
      <value>9</value>
    </property>
    <property name="externalLen">
      <value>7</value>
    </property>
  </bean>
  
  <bean id="defaultDialPlan" class="org.sipfoundry.sipxconfig.admin.dialplan.DialPlan"
    singleton="false">
    <property name="rules">
      <list>
        <ref bean="defaultEmergencyRule"></ref>
        <ref bean="defaultInternationalRule"></ref>
        <ref bean="defaultInternalRule"></ref>
        <ref bean="defaultLocalRule"></ref>
        <ref bean="defaultLongDistanceRule"></ref>
        <ref bean="defaultRestrictedRule"></ref>
        <ref bean="defaultTollFreeRule"></ref>
      </list>
    </property>
  </bean>
  
  <!--
  - D I A L P L A N  C O N T E X T
  -->
  <bean id="dialPlanContextImpl" class="org.sipfoundry.sipxconfig.admin.dialplan.DialPlanManagerImpl">
    <property name="coreContext">
      <ref bean="coreContext"></ref>
    </property>
    <property name="sessionFactory">
      <ref bean="sessionFactory"/>
    </property>
    <property name="ruleFactory">
      <ref bean="dialRuleFactory"></ref>
    </property>
    <property name="configDirectory">
      <value>${sysdir.etc}</value>
    </property>
  </bean>
  
  <bean id="dialPlanContext" class="org.springframework.aop.framework.ProxyFactoryBean" parent="abstractDao">
    <property name="proxyInterfaces">
      <value>org.sipfoundry.sipxconfig.admin.dialplan.DialPlanManager</value>
    </property>
    <property name="target">
      <ref local="dialPlanContextImpl"/>
    </property>
  </bean>

  <bean id="vxml" class="org.sipfoundry.sipxconfig.admin.dialplan.VxmlGenerator">
    <property name="velocityEngine" ref="velocityEngine"/>
  </bean>

</beans>

