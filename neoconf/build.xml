<?xml version="1.0" encoding="UTF-8" ?>
<!--  -->

<project name="neoconf" default="jar" basedir="." >

  <patternset id="test.classes" includes="**/*Test.class"/>
	
  <property name="top.build.dir" value="${basedir}/.."/>
  <property name="build.dir" value="${top.build.dir}/neoconf"/>
  <property name="test.src.dir" value="test"/>
  <property name="checkstyle.severity" value="error"/> 

  <import file="../ant-targets.xml"/>

  <path id="compile.path">
      <pathelement path="${spring.jar}" />
      <pathelement path="${common.jar}" />
      <pathelement path="${hibernate2.jar}" />
  	
  	  <!-- TEST -->
      <pathelement path="${easymock.jar}" />
  </path>

  <path id="run.path">
      <pathelement path="${commons-logging.jar}" />
      <pathelement path="${commons-dbcp.jar}" />
      <pathelement path="${commons-pool.jar}" />
      <pathelement path="${aopalliance.jar}" />
      <pathelement path="${dom4j.jar}" />
      <pathelement path="${commons-collections.jar}" />
      <pathelement path="${ehcache.jar}" />
      <pathelement path="${cglib-full.jar}" />
      <pathelement path="${jta.jar}" />
      <pathelement path="${jdbc-driver.jar}" />
  </path>

  <path id="base.path" >
    <path refid="compile.path"/>

    <!-- TEST -->
    <path refid="run.path"/>
  </path>
  <property name="classpath" refid="base.path" />

  <!-- C O M P I L E -->
  <target name="compile" depends="init">
      <javac srcdir="${src.dir}/"
         destdir="${classes.dir}"
         classpathref="base.path"
         debug="${debug}"
         debuglevel="${debuglevel}"
         deprecation="on"
         optimize="${optimize}"
         includes="**/*.java"/>

  </target>


  <!-- J A R -->
  <target name="jar" depends="compile" description="assemble neoconf jar" >
     <jar jarfile="${neoconf.jar}">
         <fileset dir="${classes.dir}" includes="**"/>         
         <fileset dir="${src.dir}" includes="**/*.xml"/>
     </jar>
  </target>


  <!-- I N S T A L L -->
  <target name="install">

    <!-- 
      - TEMP JBOSS INTEGRATION 
      -->
  	<copy todir="${dest.dir}${jboss.ext}">
  		<fileset file="${spring.jar}"/>
  		<fileset file="${hibernate2.jar}"/>
  	    <fileset file="${commons-logging.jar}"/> 
  	    <fileset file="${commons-dbcp.jar}"/> 
  	    <fileset file="${commons-pool.jar}"/> 
  	    <fileset file="${aopalliance.jar}"/> 
  	    <fileset file="${dom4j.jar}"/> 
  	    <fileset file="${commons-collections.jar}"/> 
  	    <fileset file="${ehcache.jar}"/> 
  	    <fileset file="${cglib-full.jar}"/> 
  	    <fileset file="${jta.jar}"/> 
	</copy>

  </target>

</project>


