
This file was generated using the following command.  If you are
already looking at this from web browser, then please ignore this
message.

  lynx -dump doc/src/manual/install.html > INSTALL

----------------------------------------------------------

                                 Installation

    1. For Redhat Users
         1. System Installation
         2. Installing dependencies with up2date
         3. Installing Java RPM
         4. Installing RPMs from SIPfoundry
    2. Installing From Source and Non-Redhat Users
         1. Dependencies
         2. Environment Variables
         3. Installation
         4. JBOSS Setup
         5. Postgres Database Setup
    3. Security
    4. Running
         1. Running with other sipX servers
         2. Running Standalone
    5. Windows

For Redhat Users

   These instructions apply to Enterprise and Fedora systems unless
   explicitly noted

  System Installation

    1. Install Redhat from CDs. You can select any set of packages
       including the minimum set of packages labled "router
       configuration" in the redhat installer process
    2. When prompted for firewall support, select "no firewall support"
       or open up the following ports in your iptables: 80, 8080, 8090,
       8091, 5060 and 5090

  Installing dependencies with up2date

   Fedora users may experience periodic connection errors using using
   up2date but usually if you're persistent you can get thru executing
   up2date repeatedly. If you do not use up2date, I recommend installing
   postgres and apache while installing your system, or use the redhat
   package manager to install those RPMs for you.
     * Run up2date for the first time and follow instructions to setup
       propery up2date operation.
     * Run up2date -u to make your system is up to date.
     * Run up2date on the following packages:

        Postgres
                up2date rh-postgresql-server *Enterprise Users Only
                up2date postgresql-server *Fedora Users Only

        Apache 2 webserver
                up2date httpd

  Installing Java RPM

     * j2sdk 1.4 or greater available by opening your webbrowser to this
       URL:
       [1]http://java.sun.com/j2se/1.4.2/download.html

  Installing RPMs from SIPfoundry

   Sipfoundry will make the following rpms available. After downloading,
   you can install these by typing the command rpm -iv packagename.rpm.
   It's often helpful to list more than one rpm at a time to fullfil rpm
   interpackage dependencies. RPMs listed here are in proper order to
   install individually.

   Available from sipfoundry.org
     * sipx-jboss-2.4.10-1.noarch.rpm
     * sipxportlib
     * sipxtacklib
     * sipxcommserverlib
     * sipxconfig
     * sipxproxy
     * sipxregistry
     * sipxpublisher
     * sipxvxml
     * sipxpbx

Installing From Source and Non-Redhat Users

   Install the following software packages. Follow the installation
   instructions for your OS. If there is any special installation
   instructions, they will be noted.

  Dependencies

   sipXportLib (same version sipXconfig)
          [2]http://www.sipfoundry.org/sipXportLib

   sipXtackLib (same version sipXconfig)
          [3]http://www.sipfoundry.org/sipXtack

   sipXcommserverLib (same version sipXconfig)
          [4]http://www.sipfoundry.org/sipXcommserverLib

   sipXpbx (same version sipXconfig)
          [5]http://www.sipfoundry.org/sipXpbx

   Java SDK 1.4 (tested w/1.4.2.03)
          [6]http://java.sun.com

   postgres 7.3 (tested with 7.3.4)
          [7]http://www.postgresql.org/

   JBoss 2.4.4 with Tomcat 4.0.1 (exactly this version!)
          [8]http://prdownloads.sourceforge.net/jboss/JBoss-2.4.4_Tomcat-
          4.0.1.zip

   Ant 1.6 (tested with 1.6.1)
          [9]http://ant.apache.org/

  Environment Variables

   Set the following environment variables:

   JAVA_HOME
          to where you installed java. This setting is just used to
          compile. After installation the sipx-config --jdk is used to
          find java dynamically. That means you can upgrade your java and
          not break your installation

       Example:
           export JAVA_HOME=/usr/java/j2sdk1.4.2_03


   ANT_HOME
          where you unzipped (e.g. installed) ant

       Example:
            export ANT_HOME=~/apache-ant-1.6.2


   JBOSS_HOME
          where you unzipped JBoss

       Example:
          export JBOSS_HOME=~/JBoss-2.4.10_Tomcat-4.0.6


  Installation

   If you've obtained your source from subversion, and not from a tar
   file, run this command:
  autoreconf -if

   Now compile and install sipXconfig by running this command:
     ./configure
     make
     make install

  JBOSS Setup

   After unzipping JBoss
    1. run this patch on it
      patch -d ${JBOSS_HOME} -p1 < sipx-jboss-configure.patch
    2. be sure user running sipxpbx (most cases sipxchange) has full r/w
       access to all files and directories in ${JBOSS_HOME}

  Postgresql Database Setup

   Postgres needs to always be running on your system. If you've
   installed sipXconfig from RPM, you shouldn't have to do this.

   To start postgres on Redhat 9 or Fedora systems run this command.
      service postgresql start


   To start postgres on Enterprise 3 systems run this command.
      service rhdb start


   It's recommended you should have postgres start automatically when
   your machine restarts (usually in runlevels 3 and 5).

   Fedora and Redhat 9 usersshould run this command:
      chkconfig postgresql on

   Redhat Enterprise 3 users should run this command:
      chkconfig rhdb on

   Edit postgres config files to work. This will open up TCP connections
   and allow localhost to connect to posgres
     /usr/local/sipx/bin/sipxdbmgr --setup
     /usr/local/sipx/bin/sipxdbmgr --create PDS
     /usr/local/sipx/bin/sipxdbmgr --create SDS

Security

   Set up an SSL key using the instructions in
   sipXcommserverLib/doc/INSTALL.ssl or
   /usr/share/doc/sipxcommserverlib-version/INSTALL.ssl.

Running

  Running with other sipX servers

   This is the normal configuration. It's where all the sipx servers like
   the proxy, status server, mediaserver, etc. are running on the same
   machine. In this case you will want to follow the instructions in the
   sipXpbx project for starting the sipxpbx service. This will control
   the starting and stopping of the necessary components of the
   configuration system. The sipXproxy will direct SIP messages to the
   Profile Publisher automatically. If you are using another SIP proxy
   other than the sipXproxy, or running the sipXproxy on another machine,
   follow next section "Running Standalone".

  Running Standalone

   This is when you are running just the sipXconfig server on one
   machine.

   Directing SIP message directly to sipXconfig's Profile Publisher.
          To direct SIP messages to the ProfilePublisher, a job normally
          done by the sipXproxy, edit file: /etc/sipxpbx/config.defs and
          set following setting to read the following values:

    CONFIG_SERVER_SIP_PORT=5060

   Starting stopping sipXconfig
          To start all the components of sipXconfig, launch the following
          service as root user:

  service httpd start
  sipxconfig start

          Conversely to stop:

  sipxconfig stop
  service httpd stop

Windows

   Currently there is no support for windows but here is a list of steps
   towards supporting Windows. Please submit your findings and patches
   back to mailing list
    1. edit config.properties.in and replace all variables with @VAR@
       symbol with where you have dependencies installed
    2. Run ant then ant install on all the build.xml files in these
       directories and in this order:
         1. common
         2. profilegenerator
         3. profilewriter
         4. profilepublisher
    3. Compiling the Profile Publisher's SIP agent w/ MSVC 6
       First, see the INSTALL instructions in sipXportLib on adding glib
       and pcre to the MSVC 6 environment. Next, you must add Java's JNI
       include and library paths to your MSVC 6 environment following the
       same process.
       Assuming that you installed the SDK in C:\Program
       Files\Java\j2sdk1.4.2_03 you will need to add the following:

        Additional Includes:
                C:\Program Files\Java\j2sdk1.4.2_03\include
                C:\Program Files\Java\j2sdk1.4.2_03\include\win32

        Additional Libs:
                C:\Program Files\Java\j2sdk1.4.2_03\lib

    4. Write a series of batch scripts that mimic what these scripts do
       or use Cygwin to start your system:
         1. startrmiregistry.sh
         2. profilewriter.sh
         3. profilegenerator.sh
         4. profilepublisher.sh

   Last modified: Thu Oct 21 15:24:18 EDT 2004

References

   1. http://java.sun.com/j2se/1.4.2/download.html
   2. http://www.sipfoundry.org/sipXportLib
   3. http://www.sipfoundry.org/sipXtack
   4. http://www.sipfoundry.org/sipXcommserverLib
   5. http://www.sipfoundry.org/sipXpbx
   6. http://java.sun.com/
   7. http://www.postgresql.org/
   8. http://prdownloads.sourceforge.net/jboss/JBoss-2.4.4_Tomcat-4.0.1.zip
   9. http://ant.apache.org/
