<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 4.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_4_0.dtd">

<page-specification class="org.sipfoundry.sipxconfig.site.dialplan.ManageAttendants">
  <description>add a description</description>
  <!--
	  - P R O P E R T I E S
	  -->
  <inject property="dialPlanContext" object="spring:dialPlanContext"/>
  <inject property="vxmlGenerator" object="spring:vxml"/>
  <property name="selections"  initial-value="new org.sipfoundry.sipxconfig.components.SelectMap()"/>
  <property name="selectedRows" />
  <property name="currentRow" />
  <!--
     - B E A N S
     -->
  <bean name="validator" class="org.sipfoundry.sipxconfig.components.SipxValidationDelegate"/>
  <bean name="idConverter" class="org.sipfoundry.sipxconfig.components.ObjectSourceDataSqueezer">
    <set name="class" value="literal:@org.sipfoundry.sipxconfig.admin.dialplan.AutoAttendant@class"/>
    <set name="source" value="literal:spring:dialPlanContext"/>
  </bean>
  <!--
      - C O M P O N E N T S
      -->
  <component id="tableView" type="Table">
    <binding name="columns" value="literal:* name,description"/>
    <binding name="source" value="dialPlanContext.autoAttendants"/>
    <binding name="row" value="currentRow"/>
    <binding name="convertor" value="bean:idConverter"/>
    <binding name="selections" value="selections"/>
  </component>
  <component id="nameColumnValue" type="Block"/>
  <component id="nameText" type="Insert">
    <binding name="value" value="currentRow.name"/>
  </component>
  <component id="editRowLink" type="DirectLink">
    <binding name="listener" value="listener:edit"/>
    <binding name="parameters" value="currentRow.id"/>
  </component>
  <component id="addAttendantLink" type="DirectLink">
    <binding name="listener" value="listener:add"/>
  </component>
  <component id="deleteButton" type="Submit">
    <binding name="listener" value="listener:deleteSelected"/>
  </component>
  <component id="attendantListForm" type="Form">
    <binding name="delegate" value="bean:validator"/>
  </component>
  <component id="specialAttendant" type="SpecialAttendantPanel"/>
</page-specification>
