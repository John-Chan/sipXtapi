<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC "-//Apache Software Foundation//Tapestry Specification 4.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_4_0.dtd">
<page-specification class="org.sipfoundry.sipxconfig.site.user_portal.UserCallForwarding">
  <!--
  - P R O P E R T I E S
  -->
  <inject property="forwardingContext" object="spring:forwardingContext"/>
  <inject property="loginContext" object="spring:loginContext"/>
  <inject property="coreContext" object="spring:coreContext"/>
  <inject property="userSession" type="state" object="userSession"/>
  
  <property name="callSequence"/>
  <property name="user"/>
  <property name="ring"/>
  <property name="action"/>
  <property name="userId" persist="session"/>
  <property name="callback" persist="session"/>
  
  <!--
  - B E A N S
  -->
  <bean name="validator" class="org.sipfoundry.sipxconfig.components.SipxValidationDelegate"/>
  <bean name="delayModel" class="org.sipfoundry.sipxconfig.components.EnumPropertySelectionModel" lifecycle="page">
    <set name="enumClass" value="@org.sipfoundry.sipxconfig.admin.forwarding.Ring$Type@class"/>
  </bean>
  
  <!--
  - C O M P O N E N T S
  -->
  <component id="userNavigation" type="UserNavigation">
    <binding name="user" value="user"/>
    <binding name="tab" value="CallForwarding"/>
    <binding name="heading" value="literal:Call Forwarding"/>
  </component>
  <component id="form" type="Form">
    <binding name="delegate" value="bean:validator"/>
    <binding name="listener" value="listener:submit"/>
  </component>
  <component id="errors" type="ErrorMsg"/>
  <component id="rings" type="For">
    <binding name="source" value="callSequence.rings"/>
    <binding name="converter" value="converter"/>
    <binding name="value" value="ring"/>
  </component>
  <component id="ringEditor" type="RingEditor">
    <binding name="deleteListener" value="listener:deleteRing"/>
    <binding name="ring" value="ring"/>
  </component>
  <component id="addRingLink" type="LinkSubmit">
    <binding name="selected" value="action"/>
    <binding name="tag" value="literal:add"/>
  </component>
  <component id="formActions" type="FormActions">
    <binding name="callback" value="callback"/>
    <binding name="listener" value="listener:commit"/>
  </component>
  <component id="firstCall" type="InsertText">
    <binding name="value" value="firstCallMsg"/>
  </component>
  <component id="renderVoicemail" type="If">
    <binding name="condition" value="hasVoiceMail"/>
  </component>
</page-specification>