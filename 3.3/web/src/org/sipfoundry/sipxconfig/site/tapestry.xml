<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!-- global beans used by tapestry pages -->
<beans>

  <!-- T4 V A L I D A T O R S -->
  <bean name="validFieldSize" class="org.apache.tapestry.form.validator.MaxLength">
    <property name="maxLength" value="255"/>
    <property name="message" value="Enter at most 255 characters."/>
  </bean>
  <bean name="validSipName" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^([a-zA-Z0-9_.!~*'\(\)&amp;=+$,;?/-]|%[0-9a-fA-F]{2})+$</value>
    </property>
    <property name="message">
      <value>Only a limited set of characters is valid in SIP URLs, for example: 321, joedoe, joe!?~*222</value>
    </property>
  </bean>  
  <!-- phone validator - only digits, at least one -->
  <bean name="validPhone" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^\d+$</value>
    </property>
    <property name="message">
      <value>Please enter digits only, for example: 123</value>
    </property>
  </bean>
  <bean name="validHostOrIp" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^((\d{1,3}\.){3}\d{1,3})|(\S*[a-zA-Z]\S*)$</value>
    </property>
    <property name="message">
      <value>Please enter valid DNS host name or IP address, for example server.domain.org, 10.1.1.25</value>
    </property>
  </bean>  
  <!-- phone sequence validator - comma-separated list of area codes, can be empty -->
  <bean name="validPhoneSequence" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^(\d+(\s*,?\s*))*$</value>
    </property>
    <property name="message">
      <value>Please enter a comma-separated list of numbers, for example: 508, 212, 333</value>
    </property>
  </bean>
  <!-- Username sequence validator - comma-separated list of usernames, can be empty -->
  <bean name="validUsernamePatternSequence" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^(([a-zA-Z0-9!#$%&amp;\.,'*+\-/=?^_`{|}~]+)\s*)*$</value>
    </property>
    <property name="message">
      <value>Please enter a list of numbers or names, for example: joe 508</value>
    </property>
  </bean>
  <!-- no operation, placeholder incase pins are validated in future -->
  <bean name="validPin" class="org.apache.tapestry.form.validator.MinLength">
    <property name="minLength">
      <value>0</value>
    </property>
  </bean>
  <!-- TODO: tolowercase transformer -->
  <bean name="validSerialNumber" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
	  <!-- accept capital. Translator (called after validators) will convert to lower case -->
      <value>^([a-f]|[A-F]|:|\d){12}?$</value>
    </property>
    <property name="message">
      <value>Please enter exactly 12 hexadecimal digits (0-9 and a-f), for example: 0040214131fa</value>
    </property>
  </bean>

  <!-- validSipUrlUser and validSipNameRequired  goto validSipUserId -->
  <bean name="validSipUserId" class="org.apache.tapestry.form.validator.Pattern">
    <property name="pattern">
      <value>^([a-zA-Z0-9_.!~*'\(\)&amp;=+$,;?/-]|%[0-9a-fA-F]{2})+$</value>
    </property>
    <property name="message">
      <value>Only a limited set of characters is valid in SIP URLs. Spaces and some special 
        characters are not allowed. For example: 321, joedoe, joe!?~*222</value>
    </property>
  </bean>
  <bean name="validRule" class="org.sipfoundry.sipxconfig.site.dialplan.RuleValidator">
    <property name="message">
      <value>Add at least one gateway before enabling the rule.</value>
    </property>
  </bean>

  <!-- Port to T3 Transformer -->
  <bean name="validTime" class="org.apache.tapestry.valid.DateValidator">
    <property name="format">
      <bean id="org.sipfoundry.sipxconfig.admin.DailyBackupSchedule.GMT_TIME_OF_DAY_FORMAT"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
    </property>
  </bean>
  
	<!-- used in item common - most names in sipXconfig have the same limitation as user URL -->
  <bean id="limitedBackupCountModelPart1"
    class="org.sipfoundry.sipxconfig.components.ObjectSelectionModel">
    <property name="collection">
      <bean id="org.sipfoundry.sipxconfig.site.admin.BackupPage.BACKUP_LIMIT_MODEL"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
    </property>
    <property name="labelExpression">
      <value>toString()</value>
    </property>
  </bean>
  <bean name="limitedBackupCountModel"
    class="org.sipfoundry.sipxconfig.components.ExtraOptionModelDecorator">
    <property name="model">
      <ref local="limitedBackupCountModelPart1"/>
    </property>
    <property name="extraOption">
      <null/>
    </property>
    <property name="extraLabel">
      <value>Unlimited</value>
    </property>
  </bean>
  <!-- prototype for a visit object -->
  <bean id="tableVariables" class="org.sipfoundry.sipxconfig.components.TableVariables" singleton="false">
    <property name="tablePageSize" value="20"/>    
  </bean>
  <!-- tapestry utilities -->
  <bean id="tapestry" class="org.sipfoundry.sipxconfig.components.TapestryContext"/>
  <bean id="editPageProvider" class="org.sipfoundry.sipxconfig.site.search.EnumEditPageProvider"/>
</beans>
