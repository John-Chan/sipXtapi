<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="org.sipfoundry.sipxconfig.site.admin.EditCallGroup">

    <description>Edit Call Group</description>

	<!--
	  - P R O P E R T I E S
	  -->
    <property-specification name="callGroupContext" 
    	type="org.sipfoundry.sipxconfig.admin.callgroup.CallGroupContext" 
	    initial-value="global.callGroupContext"/>
    
	<property-specification name="callGroup" 
		type="org.sipfoundry.sipxconfig.admin.callgroup.CallGroup"/>

	<property-specification name="callGroupId" 
		type="java.lang.Integer"
    	persistent="yes"/>
    
    <property-specification name="commitChanges" type="boolean" initial-value="false"/>
    
    <property-specification name="callback" 
    	type="org.apache.tapestry.callback.ICallback"/>
    
    <!--
     - B E A N S
     -->
    <bean name="validator" class="org.sipfoundry.sipxconfig.components.SipxValidationDelegate"/>
    
    <bean name="nameValidator" class="org.apache.tapestry.valid.StringValidator" lifecycle="page">
    	<set-property name="required" expression="true"/>
	    <set-property name="minimumLength" expression="1"/>
	</bean>    
    <bean name="descriptionValidator" class="org.sipfoundry.sipxconfig.components.StringSizeValidator">
        <set-property name="component" expression="components.callGroupDescription"/>
    </bean>    
    
    <!--
     - C O M P O N E N T S
     -->
    <component id="form" type="Form">
        <binding name="delegate" expression="beans.validator"/>
        <binding name="listener" expression="global.tapestry.treatUserExceptionAsValidationError(beans.validator, listeners.formSubmit)"/>
    </component>

    <component id="common" type="ItemCommon">
        <binding name="item" expression="callGroup"/>
        <binding name="useExtension" expression="true"/>
        <binding name="nameValidator" expression="global.validSipNameRequired"/>        
    </component>
        
    <component id="ringTable" type="UserRingTable">
        <binding name="rings" expression="callGroup.calls"/>
    </component>
    
    <component id="formActions" type="FormActions">
        <binding name="callback" expression="callback"/>
        <binding name="listener" expression="listeners.commit"/>
    </component>    
</page-specification>
