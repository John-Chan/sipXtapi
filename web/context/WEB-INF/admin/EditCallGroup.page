<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="org.sipfoundry.sipxconfig.site.admin.EditCallGroup">

    <description>Edit Call Group</description>

	<!--
	  - P R O P E R T I E S
	  -->
    <property-specification name="callGroupContext" 
    	type="org.sipfoundry.sipxconfig.admin.callgroup.CallGroupContext" 
	    initial-value="global.callGroupContext"/>
    
	<property-specification name="callGroup" 
		type="org.sipfoundry.sipxconfig.admin.callgroup.CallGroup"
    	persistent="yes"/>

	<property-specification name="callGroupId" 
		type="java.lang.Integer"
    	persistent="yes"/>
    
    <property-specification name="commitChanges" type="boolean" initial-value="false"/>
    
    <!--
     - B E A N S
     -->
    <bean name="validator" class="org.apache.tapestry.valid.ValidationDelegate"/>
    
    <bean name="nameValidator" class="org.apache.tapestry.valid.StringValidator" lifecycle="page">
    	<set-property name="required" expression="true"/>
	    <set-property name="minimumLength" expression="1"/>
	</bean>    
    <bean name="descriptionValidator" class="org.sipfoundry.sipxconfig.components.StringSizeValidator">
        <set-property name="component" expression="components.callGroupDescription"/>
    </bean>    
    
    <!--
     - C O M P O N E N T S
     -->
    <component id="form" type="Form">
        <binding name="delegate" expression="beans.validator"/>
        <binding name="listener" expression="listeners.formSubmit"/>
    </component>
    
    <component id="callGroupNameLabel" type="FieldLabel">
        <binding name="field" expression="components.callGroupName"/>
    </component>
    <component id="callGroupName" type="ValidField">
	    <binding name="value" expression="callGroup.name"/>
    	<binding name="validator" expression="beans.nameValidator"/>
	    <static-binding name="displayName" value="Name"/>
    </component>
    
    <component id="callGroupEnabledLabel" type="FieldLabel">
        <binding name="field" expression="components.callGroupEnabled"/>
	    <static-binding name="displayName" value="Enabled"/>
    </component>
    <component id="callGroupEnabled" type="Checkbox">
	    <binding name="selected" expression="callGroup.enabled"/>
    </component>
    
    <component id="callGroupExtensionLabel" type="FieldLabel">
        <binding name="field" expression="components.callGroupExtension"/>
    </component>
    <component id="callGroupExtension" type="ValidField">
	    <binding name="value" expression="callGroup.extension"/>
        <binding name="validator" expression="global.validPhone"/>
	    <static-binding name="displayName" value="Extension"/>
    </component>

    <component id="callGroupDescriptionLabel" type="FieldLabel">
        <binding name="field" expression="components.callGroupDescription"/>
        <static-binding name="displayName" value="Description"/>
    </component>
    <component id="callGroupDescription" type="TextArea">
        <binding name="value" expression="callGroup.description"/>
    </component>        
    
    <component id="ringTable" type="UserRingTable">
        <binding name="rings" expression="callGroup.calls"/>
    </component>
    
    <component id="onSave" type="Submit">
        <binding name="selected" expression="commitChanges"/>
        <binding name="tag" expression="true"/>
    </component>
    <component id="onCancel" type="CancelButton">
        <binding name="returnPageName" expression="@org.sipfoundry.sipxconfig.site.admin.ListCallGroups@PAGE"/>
    </component>
</page-specification>
