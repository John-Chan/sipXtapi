include top.mak

# Useful for uninstalling targets
PROJECTS_REVERSE := $(shell x=""; for i in $(PROJECTS); do x="$$i $$x"; done; echo $$x)

.PHONY: all
all:
	@echo "Target '$@' is not valid. Type 'make build' to build and install."

.PHONY: build
build:
	$(MAKE) recurse TARGETS="all check install"

.PHONY: rpm
rpm:
	$(MAKE) recurse TARGETS="rpm install-rpm"

uninstall-rpm:
	$(MAKE) recurse TARGETS="uninstall-rpm" PROJECTS=$(PROJECTS_REVERSE)

reverse:
	echo $(PROJECTS_REVERSE)

%:
	$(MAKE) recurse TARGETS="$@"
