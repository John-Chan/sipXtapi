#!/bin/bash
#
# Copyright (C) 2004 SIPfoundry Inc.
# Licensed by SIPfoundry under the LGPL license.
#
# Copyright (C) 2004 Pingtel Corp.
# Licensed to SIPfoundry under a Contributor Agreement.


# Startup Script for Software Delivery Service
# Check for SUN(tm) JVM w/ HotSpot support

Action=RUN
Status=0
Args=""

while [ $# -ne 0 ]
do
    case ${1} in
        --configtest)
            Action=CONFIGTEST
            ;;

        *)
            Args="$Args $1"
            ;;
    esac           

    shift # always consume 1
done

if [ ${Action} = CONFIGTEST ]
then
    # Add configuration checks here
    exit $Status
fi

echo $$ > @sipxpbx.run.dir@/rmiregistry.pid

JdkHome=`@bin.dir@/sipx-config --jdk`
exec $JdkHome/bin/rmiregistry -J-Dsun.rmi.loader.logLevel=VERBOSE -J-Djava.security.policy=@sipxpbx.conf.dir@/security.policy 2001
