<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="org.sipfoundry.sipxconfig.site.admin.commserver.Registrations">
  
  <description>Displays active and expired registrations</description>
  
  <property-specification name="registrationContext"
    type="org.sipfoundry.sipxconfig.admin.commserver.RegistrationContext"
    initial-value="global.registrationContext"/>
  
  <property-specification name="currentRow"
    type="org.sipfoundry.sipxconfig.admin.commserver.imdb.RegistrationItem"/>
  
  <property-specification name="displayPrimary" type="boolean" persistent="yes" initial-value="false"/>
  
  <!--
  - B E A N S
  -->
  <bean name="rowClass" class="org.apache.tapestry.bean.EvenOdd"/>
  
  <!--
  - C O M P O N E N T S
  -->
  <component id="form" type="Form">
  </component>
  <component id="togglePrimary" type="ToggleLink">
    <binding name="toggle" expression="displayPrimary"/>
    <message-binding name="labelOn" key="hide.primary"/>
    <message-binding name="labelOff" key="show.primary"/>    
  </component>
  <component id="tableView" type="contrib:TableView">
    <binding name="source" expression="registrationContext.registrations"/>
    <binding name="pageSize" expression="-1"/>
    <binding name="columns" expression="'uri,contact,=expiresColumn' + (displayPrimary ? ',primary' : '')"/>
  </component>
  <component id="tableColumns" type="contrib:TableColumns"/>
  <component id="tableRows" type="contrib:TableRows">
    <binding name="row" expression="currentRow"/>
    <binding name="class" expression="beans.rowClass.next"/>
  </component>
  <component id="tableValues" type="contrib:TableValues"/>  
  <component id="refreshButton" type="Submit">
    <message-binding name="label" key="button.refresh"/>
  </component>
</page-specification>
