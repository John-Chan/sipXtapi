<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC "-//Apache Software Foundation//Tapestry Specification 4.0//EN" "http://jakarta.apache.org/tapestry/dtd/Tapestry_4_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->
<page-specification class="org.sipfoundry.sipxconfig.site.permission.ListPermissions">
  <description>List permissions</description>
  <!--
    - P R O P E R T I E S
  -->
  <inject property="permissionManager" object="spring:permissionManager" />

  <property name="currentRow" />
  <property name="selections"
    initial-value="new org.sipfoundry.sipxconfig.components.SelectMap()" />
  <property name="rowsToDelete" />

  <!--
    - B E A N S
  -->
  <bean name="validator" class="org.sipfoundry.sipxconfig.components.SipxValidationDelegate" />
  <bean name="converter" class="org.sipfoundry.sipxconfig.components.ObjectSourceDataSqueezer">
    <set name="source" value="permissionManager" />
    <set name="class" value="@org.sipfoundry.sipxconfig.permission.Permission@class"></set>
  </bean>
  <bean name="rowInfo"
    class="org.sipfoundry.sipxconfig.site.permission.ListPermissions$PermissionRowInfo" />

  <!--
    - C O M P O N E N T S
  -->
  <component id="form" type="Form">
    <binding name="delegate" value="bean:validator" />
    <binding name="listener" value="listener:formSubmit" />
  </component>
  <component id="tableView" type="Table">
    <binding name="source" value="permissionManager.callPermissions" />
    <binding name="columns" value="literal:* label,defaultValue,description" />
    <binding name="class" value="bean:rowClass.next" />
    <binding name="row" value="currentRow" />
    <binding name="converter" value="bean:converter" />
    <binding name="selections" value="selections" />
    <binding name="rowInfo" value="bean:rowInfo" />
  </component>
  <component id="labelColumnValue" type="Block" />
  <component id="labelText" type="Insert">
    <binding name="value" value="currentRow.label" />
  </component>
  <component id="defaultValueColumnValue" type="Block" />
  <component id="defaultValueText" type="Insert">
    <binding name="value" value="getMessage(currentRow.defaultValue ? 'enabled' : 'disabled')" />
  </component>
  <component id="editRowLink" type="DirectLink">
    <binding name="listener" value="listener:edit" />
    <binding name="parameters" value="currentRow.primaryKey" />
  </component>
  <component id="addLink" type="DirectLink">
    <binding name="listener" value="listener:add" />
  </component>
  <component id="delete" type="Submit">
    <binding name="selected" value="rowsToDelete" />
    <binding name="tag" value="selections.allSelected" />
    <binding name="value" value="message:button.delete" />
  </component>
</page-specification>
