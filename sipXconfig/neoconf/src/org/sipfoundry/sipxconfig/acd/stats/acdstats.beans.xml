<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
  
  <bean id="acdStatistics" class="org.sipfoundry.sipxconfig.acd.stats.AcdStatisticsImpl" autowire="no" 
      singleton="false">
    <property name="acdContext">
      <ref bean="acdContext"/>      
    </property>
  </bean>  

  <bean id="acdHistoryDataSource" parent="dataSource">
    <property name="jdbcUrl" value="jdbc:postgresql://localhost/SIPXACD_HISTORY" />
  </bean>

  <bean id="acdHistoricalStatsImpl" class="org.sipfoundry.sipxconfig.acd.stats.AcdHistoricalStatsImpl">
    <property name="dataSource" ref="acdHistoryDataSource" />
  </bean>  

  <!-- We probably do not need to proxy this -->
  <alias alias="acdHistoricalStats" name="acdHistoricalStatsImpl" />
  
  <bean id="signoutActivityReport" class="org.sipfoundry.sipxconfig.acd.stats.AcdHistoricalReport">
    <property name="query">
      <value>
        select agent_uri, sign_in_time, sign_out_time from acd_agent_stat order by sign_in_time
      </value>
    </property>
  </bean>
  
  <bean id="agentHandleDuration" class="org.sipfoundry.sipxconfig.acd.stats.AcdHistoricalReport">
    <property name="query">
      <value>
  select agent_uri, sum(terminate_time - pick_up_time) as 
    total_handle_duration from acd_call_stat 
    group by agent_uri
    order by agent_uri
      </value>
    </property>
  </bean>

</beans>
