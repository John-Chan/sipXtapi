<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
  <!-- gateway models -->
  <bean id="gmGeneric" class="org.sipfoundry.sipxconfig.phone.PhoneModel">
    <constructor-arg>
      <value>gwGeneric</value>
    </constructor-arg>
    <constructor-arg>
      <value>Unmanaged gateway</value>
    </constructor-arg>
  </bean>

  <!-- gateway beans -->
  <bean id="gwGeneric" class="org.sipfoundry.sipxconfig.gateway.Gateway" singleton="false"
    parent="beanWithSettings">
    <property name="tftpRoot">
      <value>${sysdir.phone}/profile/tftproot</value>
    </property>
  </bean>

  <bean id="nakedGatewayModelSource"
    class="org.sipfoundry.sipxconfig.device.BeanFactoryModelSource">
    <property name="prefix" value="gm" />
  </bean>

  <bean id="gatewayModelSource" class="org.sipfoundry.sipxconfig.device.FilteredModelSource">
    <property name="modelSource" ref="nakedGatewayModelSource" />
  </bean>

  <!-- gateway context -->
  <bean id="gatewayContextImpl" class="org.sipfoundry.sipxconfig.gateway.GatewayContextImpl">
    <property name="dialPlanContext" ref="dialPlanContext" />
    <property name="sessionFactory" ref="sessionFactory" />
    <property name="modelSource">
      <ref local="gatewayModelSource" />
    </property>
  </bean>

  <bean id="gatewayContext" class="org.springframework.aop.framework.ProxyFactoryBean"
    parent="abstractDao">
    <property name="proxyInterfaces">
      <value>org.sipfoundry.sipxconfig.gateway.GatewayContext</value>
    </property>
    <property name="target">
      <ref local="gatewayContextImpl" />
    </property>
  </bean>

  <bean id="eagerGatewayProfileManager"
    class="org.sipfoundry.sipxconfig.gateway.GatewayProfileManagerImpl">
    <property name="gatewayContext">
      <ref local="gatewayContext" />
    </property>
    <property name="jobContext" ref="jobContext" />
  </bean>

  <bean id="gatewayProfileManager" class="org.sipfoundry.sipxconfig.device.LazyProfileManagerImpl"
    init-method="init">
    <property name="target">
      <ref local="eagerGatewayProfileManager" />
    </property>
    <property name="sleepInterval" value="5000" />
  </bean>
</beans>
