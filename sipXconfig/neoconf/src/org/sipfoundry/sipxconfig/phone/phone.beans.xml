<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
  <bean id="phoneDefaults" class="org.sipfoundry.sipxconfig.phone.PhoneDefaults">
	<property name="dialPlanContext" ref="dialPlanContext"/>
  </bean>
   <!--
   - P H O N E  C O N T E X T   I M P L
   -->
  <bean id="phoneContextImpl" class="org.sipfoundry.sipxconfig.phone.PhoneContextImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
    <property name="settingDao" ref="settingDaoImpl"/>
    <property name="jobQueue" ref="jobQueue"/>
    <property name="coreContext" ref="coreContext"/>
    <property name="systemDirectory" value="${sysdir.etc}"/>
    <property name="phoneDefaults">
      <ref local="phoneDefaults"/>
    </property>
    <property name="availablePhoneModels">
      <list>
        <!-- TODO: alphabetize.  right now certain unittests are selecting the Nth
             item, fix to select 0th, the unmanged one -->
        <bean id="org.sipfoundry.sipxconfig.phone.Phone.MODEL"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>

        <bean id="org.sipfoundry.sipxconfig.phone.polycom.PolycomModel.MODEL_300"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.polycom.PolycomModel.MODEL_500"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.polycom.PolycomModel.MODEL_600"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.polycom.PolycomModel.MODEL_4000"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>

        <bean id="org.sipfoundry.sipxconfig.phone.snom.SnomModel.MODEL_320"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.snom.SnomModel.MODEL_360"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>

        <bean id="org.sipfoundry.sipxconfig.phone.cisco.CiscoModel.MODEL_ATA18X"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.cisco.CiscoModel.MODEL_7905"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.cisco.CiscoModel.MODEL_7912"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.cisco.CiscoModel.MODEL_7940"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.cisco.CiscoModel.MODEL_7960"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
          
        <bean id="org.sipfoundry.sipxconfig.phone.grandstream.GrandstreamModel.MODEL_BUDGETONE"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        <bean id="org.sipfoundry.sipxconfig.phone.grandstream.GrandstreamModel.MODEL_HANDYTONE"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>

        <bean id="org.sipfoundry.sipxconfig.phone.kphone.KPhone.MODEL"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
      </list>
    </property>
  </bean>
  <!--
  - P H O N E  C O N T E X T
  -->
  <bean id="phoneContext" class="org.springframework.aop.framework.ProxyFactoryBean"
     parent="abstractDao">
    <property name="proxyInterfaces">
      <value>org.sipfoundry.sipxconfig.phone.PhoneContext</value>
    </property>
    <property name="target">
      <ref local="phoneContextImpl"/>
    </property>
  </bean>
  <!-- Define new phone models here, order is not important -->  
  <bean id="unmanagedPhone"
    class="org.sipfoundry.sipxconfig.phone.Phone" 
    singleton="false">
    <property name="phoneContext">
      <ref bean="phoneContext"/>
    </property>
    <property name="webDirectory">
      <!-- 
      - this is directory for a preferred place for serving 
      - phone configuration profiles for http access
      -    http://host:8090/phone/profile/docroot/, 
      -->
      <value>${sysdir.phone}/profile/docroot</value>
    </property>
    <property name="tftpRoot">
      <value>${sysdir.phone}/profile/tftproot</value>
    </property>
    <property name="velocityEngine">
      <ref bean="velocityEngine"/>
    </property>        
  	<property name="sipService">
	  	<ref bean="sip"/>
	  </property>    
		<property name="modelFilesContext" ref="modelFilesContext"/>
  </bean>
  <!-- K P H O N E -->
  <bean id="kphone" 
    class="org.sipfoundry.sipxconfig.phone.kphone.KPhone" 
    singleton="false"
    parent="unmanagedPhone">
  </bean>
  <!-- Snom -->
  <bean id="snom" 
    class="org.sipfoundry.sipxconfig.phone.snom.SnomPhone"
    singleton="false"
    parent="unmanagedPhone">
  </bean>
  <!-- POLYCOM -->
  <bean id="polycom" 
    class="org.sipfoundry.sipxconfig.phone.polycom.PolycomPhone"
    singleton="false" 
    parent="unmanagedPhone">
  </bean>
  <!-- Cisco 7940, 7960 -->
  <bean id="ciscoIp" 
    class="org.sipfoundry.sipxconfig.phone.cisco.CiscoIpPhone" 
    singleton="false" 
    parent="unmanagedPhone">
  </bean>
  <!-- CISCO ATA and low-end cisco phones -->
  <bean id="ciscoAta" 
    class="org.sipfoundry.sipxconfig.phone.cisco.CiscoAtaPhone" 
    singleton="false" 
    parent="unmanagedPhone">
  </bean>
  <!-- Grandstream BudgeTone, HandyTone -->
  <bean id="grandstream"
    class="org.sipfoundry.sipxconfig.phone.grandstream.GrandstreamPhone" 
    singleton="false"
    parent="unmanagedPhone">
	</bean>
  <!-- S I P -->
  <bean id="sip" class="org.sipfoundry.sipxconfig.phone.SipServiceImpl"/>
  <bean id="jobQueue" class="org.sipfoundry.sipxconfig.phone.JobQueue">
    <property name="jobContext" ref="jobContext"/>
	</bean>	
</beans>
      
